<div id="map">
  <script>
    var map;
    function initMap() {
      map = new google.maps.Map(document.getElementById('map'), {
        center: {
          lat: 51.243325,
          lng: -0.589844
        },
        zoom: 17
      });

      var markers = [];

      <% LandMark.all.each do |mark| %>
      var _<%= mark.id %> = new google.maps.Marker({
        map: map,
        position: {
          lat : <%= mark.lat %>,
          lng: <%= mark.long %>
        },
        <% if mark.is_gym %>
          <%= raw "icon\: {url\: \"http://maps.google.com/mapfiles/ms/icons/red-dot.png\"}" %>
        <% else %>
          <%= raw "icon\: {url\: \"http://maps.google.com/mapfiles/ms/icons/blue-dot.png\"}" %>
        <% end %>
      });
      markers.push(_<%= mark.id %>);
      <% end %>

      var htmlString = '<div class="container">' + '<h1 class="text-center">This is title</h1><br>' + '<p class="text-center">Content Here like lorem ipsum etc</p>' + '<a href=\"<%= new_poke_event_url(land_mark_id: '2') %>\">here</a>' + '</dvi>';

      <% if user_signed_in? %>
        var stringInfo = '<div class="container"><a href=\"<%= new_poke_event_url(land_mark_id: '2') %>\">here</a></div>'
      <% else %>
        var stringInfo = '<h1> Log in bruh </h1>'
      <% end %>

      var infoWindow = new google.maps.InfoWindow();


      for (var i = 0; i < markers.length; i++) {
        google.maps.event.addListener(markers[i], 'click', function() {
         infoWindow.setContent(htmlString);
         infoWindow.open(map, this);
        });
      }

    }
  </script>
</div>

<h1>LetsGo#home</h1>
<p>Find me in app/views/lets_go/home.html.erb</p>

<!-- This is how to make only one infowindow -->
<!-- https://stackoverflow.com/questions/1875596/have-just-one-infowindow-open-in-google-maps-api-v3 -->

<script async="async" defer="defer" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCVqQXR-NMqREuqwTCTA58MmYWAa_LyOEg&callback=initMap"></script>
